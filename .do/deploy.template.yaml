spec:
  alerts:
  - rule: DEPLOYMENT_FAILED
  - rule: DOMAIN_FAILED
  features:
  - buildpack-stack=ubuntu-22
  ingress: {}
  name: clawdbot
  region: atl
  workers:
  - dockerfile_path: /Dockerfile
    envs:
    - key: SETUP_PASSWORD
      scope: RUN_TIME
      type: SECRET
    - key: GRADIENT_API_KEY
      scope: RUN_TIME
      type: SECRET
    - key: CLAWDBOT_STATE_DIR
      scope: RUN_AND_BUILD_TIME
      value: /data/.clawdbot
    - key: CLAWDBOT_WORKSPACE_DIR
      scope: RUN_AND_BUILD_TIME
      value: /data/workspace
    - key: SPACES_ENDPOINT
      scope: RUN_AND_BUILD_TIME
      value: atl1.digitaloceanspaces.com
    - key: SPACES_BUCKET
      scope: RUN_AND_BUILD_TIME
      type: SECRET
    - key: LITESTREAM_SECRET_ACCESS_KEY
      scope: RUN_AND_BUILD_TIME
      type: SECRET
    - key: LITESTREAM_ACCESS_KEY_ID
      scope: RUN_AND_BUILD_TIME
      type: SECRET
    - key: TS_ENABLE_HEALTH_CHECK
      scope: RUN_AND_BUILD_TIME
      value: "true"
    - key: TS_LOCAL_ADDR_PORT
      scope: RUN_AND_BUILD_TIME
      value: '[::]:9002'
    - key: TS_AUTHKEY
      scope: RUN_TIME
      type: SECRET
    - key: TS_USERSPACE
      scope: RUN_AND_BUILD_TIME
      value: "true"
    - key: TS_HOSTNAME
      scope: RUN_AND_BUILD_TIME
      value: clawdbot
    - key: TS_SOCKET
      scope: RUN_AND_BUILD_TIME
      value: /tmp/tailscaled.sock
    github:
      branch: main
      deploy_on_push: true
      repo: digitalocean-labs/clawdbot-appplatform
    instance_count: 1
    instance_size_slug: apps-s-1vcpu-1gb
    name: clawdbot
    source_dir: /
